<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FractArt - Generador de Fractales</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Vollkorn+SC&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lato', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #9B8B9B;
            color: #fff;
        }

        nav {
            background-color: #8A7A8A;
            width: 100%;
            padding: 15px;
            display: flex;
            justify-content: space-around;
            border-bottom: 2px solid #695969;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 1.2em;
            transition: background-color 0.3s;
        }

        nav a:hover {
            background-color: #695969;
        }

        .section {
            display: none;
            min-height: calc(100vh - 60px);
            padding: 20px;
            background-color: #9B8B9B;
            position: relative;
        }

        .visible {
            display: block;
        }

        /* Estilos para las imágenes decorativas */
        .fractal-decoration {
            position: absolute;
            width: 200px;
            height: 200px;
            opacity: 0.2;
            z-index: 0;
        }

        .top-left {
            top: 0;
            left: 0;
            transform: rotate(180deg);
        }

        .top-right {
            top: 0;
            right: 0;
            transform: rotate(270deg);
        }

        .bottom-left {
            bottom: 0;
            left: 0;
            transform: rotate(90deg);
        }

        .bottom-right {
            bottom: 0;
            right: 0;
        }

        .center-image {
            display: block;
            margin: 20px auto;
            width: 100px;
            height: 100px;
        }

        /* Estilos para la sección de inicio */
        #inicio {
            text-align: center;
            padding: 40px 20px;
        }

        #inicio h2 {
            font-size: 2.5em;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }

        .fractal-info {
            background-color: rgba(105, 89, 105, 0.8);
            max-width: 800px;
            margin: 0 auto;
            padding: 30px;
            border-radius: 10px;
            position: relative;
            z-index: 1;
        }

        /* Estilos para la sección de generar fractales */
        #generar-fractal .form-container {
            background-color: rgba(105, 89, 105, 0.8);
            padding: 30px;
            border-radius: 10px;
            max-width: 400px;
            margin: 20px auto;
        }

        .form-container input {
            width: calc(100% - 16px);
            padding: 8px;
            margin: 8px 0;
            border: none;
            border-radius: 5px;
            background-color: #ffffff;
        }

        .form-container label {
            display: block;
            margin-top: 15px;
        }

        /* Estilos para la sección de conectar dispositivo */
        #conectar-dispositivo .connect-container {
            background-color: rgba(105, 89, 105, 0.8);
            padding: 30px;
            border-radius: 10px;
            max-width: 400px;
            margin: 40px auto;
        }

        .device-input {
            margin: 20px 0;
            display: flex;
            gap: 10px;
        }

        .device-input input {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 5px;
        }

        button {
            padding: 8px 20px;
            background-color: #4A3D4A;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #695969;
        }

        .button-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .button-group button#cancel {
            background-color: #8A7A8A;
        }

        canvas {
            display: block;
            margin: 20px auto;
            background-color: white;
            border-radius: 10px;
            max-width: 100%;
        }

        h2 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .color-preview {
            width: 100%;
            height: 30px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .fractal-concepts {
            margin-top: 30px;
        }
    
        .concept-box {
            background-color: rgba(74, 61, 74, 0.8);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            transition: transform 0.3s ease;
        }
    
        .concept-box:hover {
            transform: scale(1.02);
        }
    
        .concept-box h4 {
            color: #fff;
            margin: 0 0 10px 0;
            font-size: 1.2em;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 5px;
        }
    
        .concept-box p {
            margin: 0;
            line-height: 1.5;
            font-size: 1.1em;
        }
    </style>
</head>
<body>
    <nav>
        <a href="#" onclick="showSection('inicio')">Introducción</a>
        <a href="#" onclick="showSection('generar-fractal')">Generar Fractales</a>
        <a href="#" onclick="showSection('conectar-dispositivo')">Conectar Proyector</a>
    </nav>

    <div id="inicio" class="section visible">
        <img src="imagen.png" alt="Fractal decoration" class="fractal-decoration top-left">
        <img src="imagen.png" alt="Fractal decoration" class="fractal-decoration top-right">
        <img src="imagen.png" alt="Fractal decoration" class="fractal-decoration bottom-left">
        <img src="imagen.png" alt="Fractal decoration" class="fractal-decoration bottom-right">
    
        <h2>FractArt</h2>
        <img src="imagen.png" alt="Fractal central" class="center-image">
        <div class="fractal-info">
            <h3>¿Qué es un fractal?</h3>
            <p>Un fractal es una figura geométrica que se caracteriza por la autosemejanza, lo que significa que su estructura se repite a diferentes escalas. Esto quiere decir que si ampliamos cualquier parte de un fractal, veremos una réplica más pequeña pero similar de la estructura completa. Los fractales no solo se ven en las matemáticas, sino también en la naturaleza, como en las formas de los copos de nieve, las montañas, las nubes, las costas, y las ramificaciones de los árboles.</p>
            
            <div class="fractal-concepts">
                <div class="concept-box">
                    <h4>Parte Real (c)</h4>
                    <p>La parte real es como mover el fractal de izquierda a derecha en la pantalla. Imagina que estás moviendo una cámara horizontalmente sobre un paisaje: valores negativos mueven hacia la izquierda y valores positivos hacia la derecha. Por ejemplo, -0.7 mueve el fractal un poco hacia la izquierda.</p>
                </div>
    
                <div class="concept-box">
                    <h4>Parte Imaginaria (c)</h4>
                    <p>La parte imaginaria es como mover el fractal arriba y abajo en la pantalla. Similar a mover una cámara verticalmente: valores positivos mueven hacia arriba y negativos hacia abajo. Por ejemplo, 0.27015 mueve el fractal ligeramente hacia arriba.</p>
                </div>
    
                <div class="concept-box">
                    <h4>Número de Iteraciones</h4>
                    <p>Las iteraciones son como "capas de detalle" en tu fractal. Más iteraciones (como 256) significa más detalle y colores más suaves, pero el fractal tardará más en dibujarse. Menos iteraciones (como 50) significa menos detalle pero se dibujará más rápido. ¡Prueba diferentes números para ver cómo cambia tu fractal!</p>
                </div>
            </div>
        </div>
    </div>
    
    <div id="generar-fractal" class="section">
        <h2>Generador de Fractales</h2>
        <div class="form-container">
            <form id="fractalForm">
                <label for="real">Parte real (c):</label>
                <input type="text" id="real" value="-0.7" required>

                <label for="imaginary">Parte imaginaria (c):</label>
                <input type="text" id="imaginary" value="0.27015" required>

                <label for="iterations">Número de iteraciones:</label>
                <input type="number" id="iterations" value="256" required min="10" max="1000">

                <label for="color">Color Base:</label>
                <input type="color" id="color" value="#ff0000" onInput="updateColorPreview()">
                <div class="color-preview" id="colorPreview"></div>

                <div class="button-group">
                    <button type="submit">Generar</button>
                </div>
            </form>

            <div class="project-image-section">
                <p>¿Está seguro que quiere proyectar esta imagen?</p>
                <div class="button-group">
                    <button type="button" id="accept">Confirmar</button>
                    <button type="button" id="cancel">Cancelar</button>
                </div>
            </div>
        </div>
        <canvas id="fractalCanvas" width="600" height="400"></canvas>
    </div>

    <div id="conectar-dispositivo" class="section">
        <h2>Conectar Proyector</h2>
        <div class="connect-container">
            <div class="device-input">
                <input type="text" placeholder="Nombre del Dispositivo" id="deviceName">
                <button id="connectBtn">Conectar</button>
            </div>
            <div class="button-group">
                <button id="cancel">Cancelar</button>
            </div>
        </div>
    </div>

    <script>
        // Función para mostrar/ocultar secciones
        function showSection(sectionId) {
            // Ocultar todas las secciones
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('visible');
            });
            // Mostrar la sección seleccionada
            document.getElementById(sectionId).classList.add('visible');
        }

        // Función para actualizar la vista previa del color
        function updateColorPreview() {
            const colorInput = document.getElementById('color');
            const preview = document.getElementById('colorPreview');
            preview.style.backgroundColor = colorInput.value;
        }

        // Inicializar la vista previa del color
        updateColorPreview();

        // Event Listeners
        document.getElementById('fractalForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const realPart = parseFloat(document.getElementById('real').value);
            const imaginaryPart = parseFloat(document.getElementById('imaginary').value);
            const maxIterations = parseInt(document.getElementById('iterations').value);
            const colorValue = document.getElementById('color').value;

            drawFractal(realPart, imaginaryPart, maxIterations, colorValue);
        });

        function drawFractal(realPart, imaginaryPart, maxIterations, colorValue) {
            const canvas = document.getElementById('fractalCanvas');
            const ctx = canvas.getContext('2d');
            const imageData = ctx.createImageData(canvas.width, canvas.height);
            
            const pixelWidth = 4 / canvas.width;
            const pixelHeight = 3 / canvas.height;

            let currentX = 0;

            function drawStep() {
                if (currentX < canvas.width) {
                    for (let y = 0; y < canvas.height; y++) {
                        let zx = currentX * pixelWidth - 2;
                        let zy = y * pixelHeight - 1.5;
                        let iteration = 0;

                        while (zx * zx + zy * zy < 4 && iteration < maxIterations) {
                            const tmp = zx * zx - zy * zy + realPart;
                            zy = 2 * zx * zy + imaginaryPart;
                            zx = tmp;
                            iteration++;
                        }

                        const pixelIndex = (currentX + y * canvas.width) * 4;
                        const color = iteration === maxIterations ? 0 : (iteration / maxIterations) * 255;
                        const rgbColor = hexToRgb(colorValue);
                        imageData.data[pixelIndex] = color * (rgbColor.r / 255);
                        imageData.data[pixelIndex + 1] = color * (rgbColor.g / 255);
                        imageData.data[pixelIndex + 2] = color * (rgbColor.b / 255);
                        imageData.data[pixelIndex + 3] = 255;
                    }

                    ctx.putImageData(imageData, 0, 0);
                    currentX++;
                    requestAnimationFrame(drawStep);
                }
            }

            drawStep();
        }

        function hexToRgb(hex) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return {r, g, b};
        }

        // Event listeners para los botones de conexión
        document.getElementById('connectBtn').addEventListener('click', function() {
            const deviceName = document.getElementById('deviceName').value;
            if (deviceName) {
                alert(`Conectando a ${deviceName}...`);
            } else {
                alert('Por favor, ingrese un nombre de dispositivo.');
            }
        });

        document.getElementById('cancel').addEventListener('click', function() {
            document.getElementById('deviceName').value = '';
            alert('Conexión cancelada.');
        });
    </script>
</body>
</html>